<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <title>Umar Z.</title>    
</head>
<body>
    <div class="container">
        <h1>Feedback Form</h1>
        
        <form id="form" action="#" method="post" onsubmit="return processFormData(event)">
            <div class="form-type">
                <label for="name">Name:</label>
                <input type="text" id="name" name="name" required>
            </div>
            
            <div class="form-type">
                <label for="email" >Email</label>
                <input type="email" id="email" name="email" required>
            </div>

            <div class="form-type">
                <label for="date" >Date of Birth</label>
                <input type="date" id="date" name="date" required>
            </div>

            <div class="form-type">
                <label for="phone" >Contact</label>
                <input type="tel" id="phone" name="phone" required>
            </div>

            <div class="form-type">
                <label>Satisfaction Level:</label>
                <input type="range" id="satisfaction" name="satisfaction" 
                       value="0"       
                       min="1" max="100" 
                       required>
            </div>
            
            <div class="form-type">
                <label for="message">Your Feedback:</label>
                <textarea id="message" name="message" required></textarea>
            </div>
            
            <button type="submit" >Submit Feedback</button>
        </form>
         <!-- fake loading -->
        <div id="loading" style="display: none;">
            <div class="dot-spinner">
              <div></div><div></div><div></div>
            </div>
            <p>Loading...</p>
        </div>

        <!-- submitted data -->
        <div id="submitted-data"></div>
    </div>
         
</body>

<script>
    const form = document.getElementById('form');
    const submittedData = document.getElementById('submitted-data');

function storeFormData() {
    const user = {
        name: form.name.value,
        email: form.email.value,
        date: form.date.value,
        phone: form.phone.value,
        satisfaction: form.satisfaction.value,
        message: form.message.value
    };
    
   // console.log(user);

    // Displaying the submitted data
    submittedData.innerHTML = `
            <h2>Submitted Feedback:</h2>
            <p><strong>Name:</strong> ${user.name}</p>
            <p><strong>Email:</strong> ${user.email}</p>
            <p><strong>Email:</strong> ${user.date}</p>
            <p><strong>Phone:</strong> ${user.phone}</p>
            <p><strong>Satisfaction Level:</strong> ${user.satisfaction}</p>
            <p><strong>Message:</strong> ${user.message}</p>`;
}  

function processFormData(event) {
    event.preventDefault();

    // form validity
    if (!form.checkValidity()) {
        return;
    }

     // --- SERVER-SIDE LIKE VALIDATIONS ---
     const name = form.name.value.trim();
    const email = form.email.value.trim();
    const phone = form.phone.value.trim();
    const message = form.message.value.trim();

    // Simulate backend checks
    if (name.length < 3) {
        alert("Name must be at least 3 characters long.");
        return;
    }

    const emailPattern = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
    if (!emailPattern.test(email)) {
        alert("Invalid email format.");
        return;
    }

    const phonePattern = /^[0-9]{10,13}$/;
    if (!phonePattern.test(phone)) {
        alert("Phone must be 10 to 13 digits.");
        return;
    }

    if (message.split(' ').length < 5) {
        alert("Feedback message must be at least 5 words.");
        return;
    }
    // --------------------------------------


    // fake loading spinner w/ 2sec wait time
        submittedData.style.display = "none";
        document.getElementById('loading').style.display = "block";

        
        setTimeout(() => {
            document.getElementById('loading').style.display = "none";
            submittedData.style.display = "block";
            storeFormData();
        }, 2000);
}

</script>


</html>